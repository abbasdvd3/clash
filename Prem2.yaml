proxies:
proxy-groups:
  - name: PRO
    type: url-test
    url: http://speed.cloudflare.com/generate_204
    interval: 300
    proxies:
      - url-test
      - fallback
      - 🇺🇸a-url-test
      - 🇺🇸1
      - 🇺🇸2
    
      - 🇺🇸4
  - name: url-test
    type: url-test
    url: http://speed.cloudflare.com/generate_204
    interval: 300
    tolerance: 150
    use: 
      - provider1
      - provider2
      - provider3
  - name: fallback
    type: fallback
    url: http://speed.cloudflare.com/generate_204
    interval: 180
    proxies:
    use: 
      - provider1
      - provider2
      - provider3
  - name: 🇺🇸a-url-test
    type: url-test
    url: http://speed.cloudflare.com/generate_204
    interval: 300
    tolerance: 99
    filter: '🇺🇸|US|America|United.*?States|美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥'
    use: 
      - provider1
      - provider2
      - provider3
  - name: 🇺🇸1
    type: url-test
    url: http://speed.cloudflare.com/generate_204
    filter: "🇭🇰|HK|Hong|Kong|HGC|WTT|CMI|港|🇦🇫|🇦🇽|🇦🇱|🇩🇿|🇦🇸|🇦🇩|🇦🇴|🇦🇮|🇧🇭|🇧🇸|🇦🇿|🇦🇹|🇦🇺|🇦🇼|🇦🇲|🇦🇷|🇦🇬|🇧🇩|🇧🇧|🇧🇪|🇧🇾|🇧🇯|🇧🇹|🇧🇴|🇰🇭|🇧🇮|🇧🇫|🇧🇬|🇧🇳|🇻🇬|🇧🇷|🇧🇼|🇧🇦|🇨🇲|🇨🇦|🇮🇨|🇨🇻|🇧🇶|🇰🇾|🇨🇫|🇹🇩|🇮🇴|🇨🇰|🇨🇬|🇰🇲|🇨🇨|🇨🇴|🇨🇽|🇨🇳|🇨🇱"
    interval: 300
    tolerance: 99
    use: 
      - provider1
      - provider2
      - provider3
  - name: 🇺🇸2
    type: url-test
    url: http://speed.cloudflare.com/generate_204
    filter: "🇯🇵|JP|Japan|Tokyo|Osaka|Saitama|东京|大阪|埼玉|日|🇩🇲|🇨🇮|🇩🇴|🇪🇨|🇭🇷|🇪🇬|🇸🇻|🇨🇼|🇨🇾|🇨🇿|🇩🇰|🇩🇯|🇸🇿|🇪🇪|🇬🇫|🇫🇷|🇪🇷|🇫🇮|🇫🇯|🇫🇴|🇫🇰|🇪🇺|🇭🇰|🇭🇳|🇮🇲|🇮🇱|🇮🇹|🇮🇸|🇮🇳|🇮🇪🇯🇴🎌🇱🇦🇱🇧|🇱🇸|🇱🇦|🇽🇰|🇰🇮|🇳🇫|🇳🇿|🇲🇵|🇷🇼|🇵🇱|🇸🇹|🇷🇼|🇷🇪|🇵🇷|🇵🇸|🇵🇬|🇵🇳|🇻🇨"
    interval: 300
    tolerance: 99
    use: 
      - provider1
      - provider2
      - provider3
  - name: 🇺🇸4
    type: url-test
    url: http://speed.cloudflare.com/generate_204
    filter: "🇸🇬|SG|Singapore|狮城|^新|^节北|^刷更|新|^节北|🇹🇬|🇹🇰|🇹🇼|🇻🇳|🇻🇪|🏴󠁧󠁢󠁥󠁮󠁧󠁿|🇬🇧|🇻🇦|🇿🇼|🇻🇮|🇺🇾|🇹🇨|🇺🇬|🇦🇪|🇹🇴|🇨🇭"
    interval: 300
    tolerance: 99
    use: 
      - provider1
      - provider2
      - provider3
  - name: 🎯
    type: select
    icon: https://fastly.jsdelivr.net/gh/dongchengjie/metaST@main/metaST/Resources/icons/bug.svg
    proxies: [DIRECT, url-test, fallback]
  - name: 🆎 AdBlock
    type: select
    icon: https://fastly.jsdelivr.net/gh/dongchengjie/metaST@main/metaST/Resources/icons/block.svg
    proxies: [REJECT, DIRECT, PROXY, url-test, fallback]
  - name: PROXY
    type: select
    proxies:
      - PRO
      - fallback
      - url-test
      - 🇺🇸a-url-test
      - 🇺🇸1
      - 🇺🇸2
      - 🇺🇸4
    use: 
      - provider1
      - provider2
      - provider3
proxy-providers:
  provider1:
    type: http
    url: "https://raw.githubusercontent.com/abbasdvd3/clash/main/vless/p.hamrah" 
    path: Prem2/p1.yaml
    interval: 890
    health-check:
      enable: true
      interval: 300
      url: http://speed.cloudflare.com/generate_204
  provider2:
    type: http
    url: "https://raw.githubusercontent.com/abbasdvd3/clash/main/P1"    
    path: Prem2/P2.yaml
    interval: 890
    health-check:
      enable: true
      interval: 300
      url: http://speed.cloudflare.com/generate_204
  provider3:
    type: http
    url: "https://raw.githubusercontent.com/abbasdvd3/clash/main/vless/p.all"  
    path: Prem2/P3.yaml
    interval: 890
    health-check:
      enable: true
      interval: 300
      url: http://speed.cloudflare.com/generate_204
rule-providers:
  reject:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt
    path: ruleset/reject.yaml
    interval: 86400
  category-ads-all:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/category-ads-all.yaml
    path: ruleset/category-ads-all.yaml
    interval: 86400
  nsfw1:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/nsfw.yaml
    path: ruleset/nsfw1.yaml
    interval: 86400
  social:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/social.yaml
    path: ruleset/social.yaml
    interval: 86400
  ads:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ads.yaml
    path: ruleset/ads.yaml
    interval: 86400
rules:
  - PROCESS-NAME,com.tomclaw.appsend,DIRECT
  - PROCESS-NAME,ir.mci.ecareapp,🎯,no-resolve
  - PROCESS-NAME,com.myirancell,🎯,no-resolve
  - DOMAIN-SUFFIX,ir,🎯,no-resolve
  - RULE-SET,social,PROXY,no-resolve
  - RULE-SET,nsfw1,PROXY,no-resolve
  - GEOIP,facebook,PROXY,no-resolve
  - GEOIP,google,PROXY,no-resolve
  - GEOIP,twitter,PROXY,no-resolve
  - GEOIP,telegram,PROXY,no-resolve
  - GEOIP,CN,🎯,no-resolve
  - GEOIP,ir,🎯,no-resolve
  - RULE-SET,category-ads-all,🆎 AdBlock
  - RULE-SET,ads,🆎 AdBlock
  - PROCESS-NAME,com.samsung.android.messaging,🆎 AdBlock
  - PROCESS-NAME,com.samsung.android.app.telephonyui,🆎 AdBlock
  - PROCESS-NAME,com.samsung.android.smartcallprovider,🆎 AdBlock
  - PROCESS-NAME,com.samsung.android.intellivoiceservice,🆎 AdBlock
  - PROCESS-NAME,com.sec.imsservice,🆎 AdBlock
  - MATCH,PROXY
