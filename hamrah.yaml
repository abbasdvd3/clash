port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
bind-address: "*"
ipv6: false
log-level: info
find-process-mode: always
enable-process: true
unified-delay: true
keep-alive-interval: 15
tcp-concurrent: true
geodata-mode: true

external-controller: 0.0.0.0:9090
external-ui: ui
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
global-client-fingerprint: chrome
geo-auto-update: true
geo-update-interval: 24
global-ua: clash.meta
profile:
  store-selected: true
  store-fake-ip: true
experimental:
  quic-go-disable-gso: false
  quic-go-disable-ecn: false
sniffer:
  enable: false
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
tun:
  enable: true
  stack: mixed
  dns-hijack:
    - 'any:53'
  auto-route: true
  auto-detect-interface: true
dns:
  enable: true
  use-hosts: true
  ipv6: false
  remote-dns-resolve: false# default value is true
  enhanced-mode: fake-ip # redir-host # fake-ip
  fake-ip-range: 28.0.0.0/16
  listen: 0.0.0.0:1053
  default-nameserver:
    - 114.114.114.114
    - 119.29.29.29
    - 119.28.28.28
    - 8.8.8.8
    - tls://1.12.12.12:853
    - tls://223.5.5.5:853
  proxy-server-nameserver:
    - https://1.12.12.12/dns-query
    - https://223.5.5.5/dns-query
  nameserver:
    - https://120.53.53.53/dns-query
    - tls://223.6.6.6:853
    - 8.8.8.8
    - tls://223.5.5.5:853
    - tls://223.6.6.6:853
    - tls://120.53.53.53
    - tls://1.12.12.12
    - 114.114.114.114#PROXY 
    - tls://223.5.5.5:853
    - dhcp://en0
    - quic://dns.adguard.com:784#PROXY
    - tls://dot.pub:853
  remote-nameserver:
    - https://8.8.8.8/dns-query
    - tls://8.8.8.8:853
 # fallback:
   # - tcp://8.8.8.8:53#DNS-Proxy # if set `remote-dns-resolve` to false, then enable it.
  fake-ip-filter:
    - '*.lan'
    - '+.example.com'
  nameserver-policy:
    '+.example.com': 192.168.1.254  
    "geosite:.ir,private": 
      - https://223.5.5.5/dns-query
      - https://120.53.53.53/dns-query
    "geosite:ir":
      - https://8.8.4.4/dns-query#机场
      - https://1.0.0.1/dns-query#机场
 # proxy-server-nameserver:
#    - https://223.5.5.5/dns-query
 #   - https://120.53.53.53/dns-query   
proxies:
proxy-groups:
  - name: 🚀
    type: select
    proxies:
      - 🚀🚀
      - ♻️
      - 🔯
      - 🔮
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇺🇲
      - 🇰🇷
      - DIRECT
  - name: 🚀🚀
    type: select
    proxies:
      - ♻️
      - 🔯
      - 🔮
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇺🇲
      - 🇰🇷
    use:
      - provide1
  - name: ♻️
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
    use:
      - provide1

  - name: 🔯
    type: fallback
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
    use:
      - provide1

  - name: 🔮
    type: load-balance
    strategy: consistent-hashing
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
    use:
      - provide1
  - name: 📲
    type: select
    proxies:
      - 🚀
      - ♻️
      - 🇸🇬
      - 🇭🇰
      - 🇨🇳
      - 🇯🇵
      - 🇺🇲
      - 🇰🇷
      - 🚀🚀
      - DIRECT
  - name: 💬 OpenAi
    type: select
    proxies:
      - 🚀
      - ♻️
      - 🇸🇬
      - 🇭🇰
      - 🇨🇳
      - 🇯🇵
      - 🇺🇲
      - 🇰🇷
      - 🚀🚀
      - DIRECT
  - name: 📹
    type: select
    proxies:
      - 🚀
      - ♻️
      - 🇸🇬
      - 🇭🇰
      - 🇨🇳
      - 🇯🇵
      - 🇺🇲
      - 🇰🇷
      - 🚀🚀
      - DIRECT
  - name: 🎥
    type: select
    proxies:
      - 🎥🎥
      - 🚀 
      - ♻️
      - 🇸🇬
      - 🇭🇰
      - 🇨🇳
      - 🇯🇵
      - 🇺🇲
      - 🇰🇷
      - 🚀🚀
      - DIRECT
  - name: 📺
    type: select
    proxies:
      - 🇨🇳
      - 🚀
      - 🚀🚀
      - DIRECT
  - name: 📺📺
    type: select
    proxies:
      - 🎯
      - 🇨🇳
      - 🇭🇰
  - name: 🌏
    type: select
    proxies:
      - 🚀
      - ♻️
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇺🇲
      - 🇰🇷
      - 🚀🚀
      - DIRECT
  - name: 🌏🌏
    type: select
    proxies:
      - DIRECT
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🚀
  - name: 📢 FCM
    type: select
    proxies:
      - DIRECT
      - 🚀
      - 🇺🇲
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇰🇷
      - 🚀🚀
  - name: Ⓜ️ 微软Bing
    type: select
    proxies:
      - DIRECT
      - 🚀
      - 🇺🇲
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇰🇷
      - 🚀🚀
  - name: Ⓜ️
    type: select
    proxies:
      - DIRECT
      - 🚀
      - 🇺🇲
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇰🇷
      - 🚀🚀
  - name: Ⓜ️Ⓜ️
    type: select
    proxies:
      - DIRECT
      - 🚀
      - 🇺🇲
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇰🇷
      - 🚀🚀
  - name: 🍎
    type: select
    proxies:
      - DIRECT
      - 🚀
      - 🇺🇲
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇰🇷
      - 🚀🚀
  - name: 🎮
    type: select
    proxies:
      - DIRECT
      - 🚀
      - 🇺🇲
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇰🇷
      - 🚀🚀
  - name: 🎶
    type: select
    proxies:
      - DIRECT
      - 🚀
      - ♻️
  - name: 🎯
    type: select
    proxies:
      - DIRECT
      - 🚀
      - ♻️
  - name: 🛑
    type: select
    proxies:
      - REJECT
      - DIRECT
  - name: 🐟
    type: select
    proxies:
      - 🚀
      - ♻️
      - DIRECT
      - 🇭🇰
      - 🇨🇳
      - 🇸🇬
      - 🇯🇵
      - 🇺🇲
      - 🇰🇷
      - 🚀🚀
  - name: 🇭🇰
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
    use:
      - provide1
  - name: 🇯🇵
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
    use:
      - provide1
  - name: 🇺🇲
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 150
    proxies:
    use:
      - provide1

  - name: 🇨🇳
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
    use:
      - provide1
   
  - name: 🇸🇬
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
    use:
      - provide1
      
  - name: 🇰🇷
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
    use:
      - provide1
  - name: 🎥🎥
    type: select
    proxies:
      - DIRECT
      
rule-providers:
  LocalAreaNetwork:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/LocalAreaNetwork.list
  UnBan:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/UnBan.list
  BanAD:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanAD.list
  BanProgramAD:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanProgramAD.list
  BanEasyList:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyList.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanEasyList.list
  BanEasyListChina:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyListChina.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanEasyListChina.list
  BanEasyPrivacy:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyPrivacy.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanEasyPrivacy.list
  GoogleCN:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/GoogleCN.list
  SteamCN:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/SteamCN.list
  Microsoft:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/Microsoft.list
  Apple:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/Apple.list
  Telegram:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/Telegram.list
  ProxyMedia:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ProxyMedia.list
  ProxyGFWlist:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ProxyGFWlist.list
  ChinaDomain:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ChinaDomain.list
  ChinaCompanyIp:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ChinaCompanyIp.list
  ir:
    type: http
    format: yaml
    behavior: domain
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/ir.yaml"
    path: ./ACL4SSR/ACL4SSR/ir.yaml
    interval: 86400
  ads:
    type: http
    format: yaml
    behavior: domain
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/ads.yaml"
    path: ./ACL4SSR/ACL4SSR/ads.yaml
    interval: 86400
  malware:
    type: http
    format: yaml
    behavior: domain
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/malware.yaml"
    path: ./ACL4SSR/ACL4SSR/malware.yaml
    interval: 86400
  phishing:
    type: http
    format: yaml
    behavior: domain
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/phishing.yaml"
    path: ./ACL4SSR/ACL4SSR/phishing.yaml
    interval: 86400
  cryptominers:
    type: http
    format: yaml
    behavior: domain
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/cryptominers.yaml"
    path: ./ACL4SSR/ACL4SSR/cryptominers.yaml
    interval: 86400
  apps:
    type: http
    format: yaml
    behavior: classical
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/apps.yaml"
    path: ./ACL4SSR/ACL4SSR/apps.yaml
    interval: 86400
  ircidr:
    type: http
    format: yaml
    behavior: ipcidr
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/ircidr.yaml"
    path: ./ACL4SSR/ACL4SSR/ircidr.yaml
    interval: 86400
  private:
    type: http
    format: yaml
    behavior: ipcidr
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/private.yaml"
    path: ./ACL4SSR/ACL4SSR/private.yaml
    interval: 86400
  arvancloud:
    type: http
    format: yaml
    behavior: ipcidr
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/arvancloud.yaml"
    path: ./ACL4SSR/ACL4SSR/arvancloud.yaml
    interval: 86400
  derakcloud:
    type: http
    format: yaml
    behavior: ipcidr
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/derakcloud.yaml"
    path: ./ACL4SSR/ACL4SSR/derakcloud.yaml
    interval: 86400
  iranserver:
    type: http
    format: yaml
    behavior: ipcidr
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/iranserver.yaml"
    path: ./ACL4SSR/ACL4SSR/iranserver.yaml
    interval: 86400
  parspack:
    type: http
    format: yaml
    behavior: ipcidr
    url: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/parspack.yaml"
    path: ./ACL4SSR/ACL4SSR/parspack.yaml
    interval: 86400

  ProxyMedia:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ProxyMedia.list
  ProxyLite:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyLite.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ProxyLite.list
  ChinaDomain:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ChinaDomain.list
  ChinaCompanyIp:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ChinaCompanyIp.list

  IpinfoSpeedtest:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/mphin/ProxyTools/main/rules/IpinfoSpeedtest.list
    format: text
    interval: 300
    path: ./ACL4SSR/ACL4SSR/IpinfoSpeedtest
proxy-providers:
  "provide1":
    type: http
    url: "https://raw.githubusercontent.com/abbasdvd3/clash/main/3.yaml"
    interval: 300
    path: proxy_hamrah/v.yaml
    health-check:
      enable: true
      url: https://www.google.com/generate_204
      interval: 300

rules :
  - RULE-SET,private,DIRECT,no-resolve
  - RULE-SET,apps,DIRECT
  - RULE-SET,IpinfoSpeedtest,DIRECT
  - RULE-SET,ads,🛑
  - RULE-SET,malware,🛑
  - RULE-SET,phishing,🛑
  - RULE-SET,cryptominers,🛑
#  - RULE-SET,ir,DIRECT
#  - RULE-SET,ircidr,DIRECT
#  - RULE-SET,arvancloud,DIRECT
#  - RULE-SET,derakcloud,DIRECT
#  - RULE-SET,iranserver,DIRECT
##  - RULE-SE3T,parspack,DIRECT
  - RULE-SET,BanAD,🛑
  - RULE-SET,BanProgramAD,🛑
  - RULE-SET,GoogleCN,🚀
  - RULE-SET,SteamCN,🚀
  - DOMAIN-SUFFIX,v2rayse.com,🚀
  - DOMAIN-SUFFIX,github.com,🚀
  - DOMAIN-SUFFIX,raw.githubusercontent.com,🚀
  - DOMAIN-SUFFIX,cff.pw,🚀
  - DOMAIN-SUFFIX,vpnse.org,🚀
  - DOMAIN-SUFFIX,cfmem.com,🚀
  - RULE-SET,Telegram,🚀
  - RULE-SET,ProxyMedia,🚀
  - RULE-SET,ProxyLite,🚀
  - RULE-SET,ChinaDomain,DIRECT
  - RULE-SET,ChinaCompanyIp,DIRECT
  - GEOIP,CN,DIRECT
  - GEOIP,google,🚀
  - GEOIP,telegram,🚀
  - GEOIP,ir,DIRECT
  - RULE-SET,LocalAreaNetwork,🎯
  - RULE-SET,BanAD,🛑
  - RULE-SET,BanProgramAD,🛑
  - RULE-SET,BanEasyList,🛑
  - RULE-SET,BanEasyListChina,🛑
  - RULE-SET,BanEasyPrivacy,🛑
  - RULE-SET,GoogleCN,🎯
  - RULE-SET,SteamCN,🎯
  - RULE-SET,Microsoft,Ⓜ️
  - RULE-SET,Apple,🍎
  - RULE-SET,Telegram,📲
  - RULE-SET,ProxyMedia,🌍
# 长风网站，自动注入
  - DOMAIN-SUFFIX,v2rayse.com,🚀
  - DOMAIN-SUFFIX,cff.pw,🚀
  - DOMAIN-SUFFIX,vpnse.org,🚀
  - DOMAIN-SUFFIX,cfmem.com,🚀
  - RULE-SET,ProxyGFWlist,🚀
  - RULE-SET,ChinaDomain,🎯
  - RULE-SET,ChinaCompanyIp,🎯
  - GEOIP,CN,🎯
  - MATCH,🐟
