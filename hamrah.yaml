8port: 7891
socks-port: 7892
mixed-port: 7890
redir-port: 9797
tproxy-port: 9898
lan-allowed-ips:
  - 0.0.0.0/0
  - ::/0
lan-disallowed-ips:
  - 192.168.0.3/32
# mode: rule
skip-auth-prefixes:
  - 127.0.0.1/8
  - ::1/128
allow-lan: true
unified-delay: false
bind-address: "*"
log-level: silent
ipv6: true
geodata-mode: true
geodata-loader: standard
disable-keep-alive: false
external-controller: 127.0.0.1:9090
external-ui: ./ui
external-ui-name: xd
external-ui-url: 'https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip'
tcp-concurrent: true
find-process-mode: strict
allow-origins:
allow-private-network: true
external-controller-unix: mihomo.sock
external-controller-pipe: pipe\mihomo
profile:
  store-selected: true
  store-fake-ip: true
global-client-fingerprint: chrome
etag-support: true
experimental:
  quic-go-disable-gso: true
  quic-go-disable-ecn: true
  dialer-ip4p-convert: true
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff: 
    HTTP: 
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 5228, 8443]
    QUIC:
      ports: [443, 5228, 8443]
  force-domain:
    - +.v2ex.com
    - mtalk.google.com
    - alt1-mtalk.google.com
    - alt2-mtalk.google.com
    - alt3-mtalk.google.com
    - alt4-mtalk.google.com
    - alt5-mtalk.google.com
    - alt6-mtalk.google.com
    - alt7-mtalk.google.com
    - alt8-mtalk.google.com
    - dl.google.com
    - dl.l.google.com
    - '+.weixin.qq.com'
    - '+.rc.sunlogin.net'
    - '+.coolapk.com'
    - '+.douban.com'
    - '+.dianping.com'
    - '+.meituan.com'
    - '+.meituan.net'
    - '+.xiaohongshu.com'
    - '+.xhscdn.com'
  skip-domain:
    - Mijia Cloud
    - dlg.io.mi.com
    - +.apple.com
  sniffing:
    - tls
    - http
  port-whitelist:
    - "80"
    - "443"
    - 8000-9999
    
proxy-providers:
  A1:
    type: http
    url: "https://raw.githubusercontent.com/abbasdvd3/clash/refs/heads/main/vless/x"

  B2:
    type: http
    url: "https://raw.githubusercontent.com/Surfboardv2ray/v2ray-worker-sub/refs/heads/master/Eternity"

  C3:
    type: http
    url: "https://raw.githubusercontent.com/lagzian/SS-Collector/main/reality_clash.yaml" # https://raw.githubusercontent.com/Surfboardv2ray/v2ray-worker-sub/refs/heads/master/providers/providers64

  D4:
    type: http
    url: "https://raw.githubusercontent.com/lagzian/SS-Collector/main/SS/trinity_clash.yaml"

  E5:
    url: "https://raw.githubusercontent.com/lagzian/SS-Collector/main/mix_clash.yaml" # https://raw.githubusercontent.com/soroushmirzaei/telegram-configs-collector/main/splitted/mixed"
    type: http

  F6:
    url: "https://raw.githubusercontent.com/qjlxg/aggregator/main/data/clash.yaml"
    type: http

  G7:
    url: "https://raw.githubusercontent.com/changfengoss/pub/main/data/2024_08_10/PpoEAg.yaml"
    type: http

  H8:
    url: "http://172.245.30.41/clash.yaml"
    type: http

  I9:
    url: "https://raw.githubusercontent.com/Barabama/FreeNodes/master/nodes/merged.txt"
    type: http

  J10:
    url: "https://raw.githubusercontent.com/qjlxg/aggregator/main/data/clash.yaml"
    type: http

  K11:
    url: "https://raw.githubusercontent.com/sarvari1378/SingBOX/refs/heads/main/SUB/FREEIRAN-VIP"
    type: http

  L12:
    url: "https://raw.githubusercontent.com/ripaojiedian/freenode/main/clash"
    type: http

  M13:
    url: "https://github.com/sarvari1378/SingBOX/raw/refs/heads/main/SUB/WORKER-VIP"
    type: http

  N14:
    url: "https://raw.githubusercontent.com/snakem982/proxypool/main/source/clash-meta.yaml"
    type: http

  O15:
    url: "https://raw.githubusercontent.com/Ruk1ng001/freeSub/main/clash.yaml"
    type: http

  P16:
    url: "https://www.xrayvip.com/free.yaml"
    type: http

  Q17:
    url: "https://raw.githubusercontent.com/chengaopan/AutoMergePublicNodes/master/list.yml"
    type: http

  R18:
    url: "https://raw.githubusercontent.com/ermaozi/get_subscribe/main/subscribe/clash.yml"
    type: http

  S19:
    url: "https://raw.githubusercontent.com/vxiaov/free_proxies/main/clash/clash.provider.yaml"
    type: http

  T19:
    url: "https://raw.githubusercontent.com/ripaojiedian/freenode/main/clash"
    type: http

  U20:
    url: "https://raw.githubusercontent.com/snakem982/proxypool/main/source/clash-meta.yaml"
    type: http

  V21:
    url: "https://raw.githubusercontent.com/peasoft/NoMoreWalls/master/list.meta.yml"
    type: http

  W22:
    url: "https://gist.githubusercontent.com/freeorgworld/128c0e7260148f61f8708c9566aed5ab/raw/publicvless.yaml"
    type: http

  X23:
    url: "https://clash.221207.xyz/pubclashyaml"
    type: http

  Y24:
    url: "https://raw.githubusercontent.com/lagzian/SS-Collector/main/SS/trinity_clash.yaml"
    type: http

  Z25:
    url: "https://fs.v2rayse.com/share/20240915/wuvsfrbi3q.yaml"
    type: http

  AA26:
    url: "https://raw.gitmirror.com/sun9426/sun9426.github.io/main/subscribe/Clash.yaml"
    type: http

  AB27:
    url: "https://raw.githubusercontent.com/freebaipiao/freebaipiao/refs/heads/main/GfwserveClash.yaml" # https://raw.githubusercontent.com/sarvari1378/SingBOX/refs/heads/main/SUB/Fredom-VIP
    type: http

  AC28:
    url: "https://tt.vg/iMfJI"
    type: http


       
proxies:
  - name: â˜„ï¸IRANâ˜„ï¸
    type: direct
    udp: true
  - name: ğŸ¥‡DNSğŸ¥‡
    type: dns
   

proxy-groups:
  - name: ğŸ¥‡PROXYğŸ¥‡
    type: select
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Global.png
    proxies:
      - ğŸ¥‡AUTOğŸ¥‡
      - ğŸ¥‡FALLBACKğŸ¥‡
      - ğŸ¥‡ğŸ‡­ğŸ‡°ğŸ¥‡
      - ğŸ¥‡ğŸ‡¨ğŸ‡³ğŸ¥‡
      - ğŸ¥‡ğŸ‡¸ğŸ‡¬ğŸ¥‡
      - ğŸ¥‡ğŸ‡ºğŸ‡²ğŸ¥‡
      - ğŸ¥‡ğŸ‡¯ğŸ‡µğŸ¥‡
      - ğŸ¥‡ğŸ‡°ğŸ‡·ğŸ¥‡
      
  - name: ğŸ¥‡AUTOğŸ¥‡
    type: url-test
    url: cp.cloudflare.com
    icon: https://raw.gitmirror.com/Koolson/Qure/master/IconSet/Color/Airport.png
    interval: 180
    include-all-providers: true
 #   expected-status: 200/204
    proxies: 
    use:
    
  - name: ğŸ¥‡FALLBACKğŸ¥‡
    type: fallback
    url: cp.cloudflare.com
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Twitter.png
    interval: 180
    include-all-providers: true
 #   expected-status: 200/204
    proxies: 
    use:
    
  - name: ğŸ¥‡IRANğŸ¥‡
    type: select
    icon: https://raw.gitmirror.com/Koolson/Qure/master/IconSet/Color/Rocket.png
    proxies:
      - â˜„ï¸IRANâ˜„ï¸
      - ğŸ¥‡PROXYğŸ¥‡
      - ğŸ¥‡AUTOğŸ¥‡
      - ğŸ¥‡DNSğŸ¥‡
      
  - name: ğŸ¥‡FIRSTğŸ¥‡
    type: select
    icon: https://raw.gitmirror.com/Koolson/Qure/master/IconSet/Color/Final.png
#    include-all-proxies: true
    include-all-providers: true
    expected-status: 200/204
    use:
    proxies:
      - ğŸ¥‡PROXYğŸ¥‡
      - ğŸ¥‡IRANğŸ¥‡
      - ğŸ¥‡FALLBACKğŸ¥‡
      - ğŸ¥‡ğŸ‡­ğŸ‡°ğŸ¥‡
      - ğŸ¥‡ğŸ‡¨ğŸ‡³ğŸ¥‡
      - ğŸ¥‡ğŸ‡¸ğŸ‡¬ğŸ¥‡
      - ğŸ¥‡ğŸ‡ºğŸ‡²ğŸ¥‡
      - ğŸ¥‡ğŸ‡¯ğŸ‡µğŸ¥‡
      - ğŸ¥‡ğŸ‡°ğŸ‡·ğŸ¥‡
  - name: ğŸ¥‡ğŸ‡­ğŸ‡°ğŸ¥‡
    type: fallback
    url: cp.cloudflare.com
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Hong_Kong.png
    interval: 180
    include-all-providers: true
    expected-status: 200/204
    filter: "ğŸ‡­ğŸ‡°|HK|Hong|Kong|HGC|WTT|CMI|æ¸¯"
    proxies: 
    use:

  - name: ğŸ¥‡ğŸ‡¯ğŸ‡µğŸ¥‡
    type: fallback
    url: cp.cloudflare.com
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Japan.png
    interval: 180
    include-all-providers: true
    expected-status: 200/204
    filter: "ğŸ‡¯ğŸ‡µ|JP|Japan|Tokyo|Osaka|Saitama|ä¸œäº¬|å¤§é˜ª|åŸ¼ç‰|æ—¥"
    proxies: 
    use:

  - name: ğŸ¥‡ğŸ‡ºğŸ‡²ğŸ¥‡
    type: fallback
    url: cp.cloudflare.com
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/United_States.png
    interval: 180
    include-all-providers: true
    expected-status: 200/204
    proxies:
    filter: "ğŸ‡ºğŸ‡¸|US|America|United.*?States|ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥"
    use:

  - name: ğŸ¥‡ğŸ‡¨ğŸ‡³ğŸ¥‡
    type: fallback
    url: cp.cloudflare.com
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Domestic.png
    interval: 180
    include-all-providers: true
    expected-status: 200/204
    filter: "ğŸ‡¹ğŸ‡¼|TW|Taiwan|æ–°åŒ—|å½°åŒ–|CHT|å°|HINET"
    proxies: 
    use:

  - name: ğŸ¥‡ğŸ‡¸ğŸ‡¬ğŸ¥‡
    type: fallback
    url: cp.cloudflare.com
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Singapore.png
    interval: 180
    include-all-providers: true
    expected-status: 200/204
    filter: "ğŸ‡¸ğŸ‡¬|SG|Singapore|ç‹®åŸ|^æ–°[^èŠ‚åŒ—]|[^åˆ·æ›´]æ–°[^èŠ‚åŒ—]"
    proxies: 
    use:

  - name: ğŸ¥‡ğŸ‡°ğŸ‡·ğŸ¥‡
    type: fallback
    url: cp.cloudflare.com
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Korea.png
    interval: 180
    include-all-providers: true
    expected-status: 200/204
    filter: "ğŸ‡°ğŸ‡·|KO?R|Korea|é¦–å°”|éŸ©|éŸ“"
    proxies: 
    use:
rule-providers:
  gf:
    type: http
    format: yaml
    behavior: classical
    url: "https://raw.githubusercontent.com/abbasdvd3/clash/refs/heads/main/rule_provider/ProxyGFWlist.yaml"
    path: ruleset/gf.yaml
    interval: 86400
  blocked:
    type: http
    format: yaml
    behavior: classical
    url: "https://raw.githubusercontent.com/abbasdvd3/clash/refs/heads/main/rule_provider/unblocked.yaml"
    path: ruleset/blocked.yaml
    interval: 86400
  ADS:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Project-META/rules-mrs/basic/reject.mrs"
    path: ruleset/reject.mrs
    format: mrs
    interval: 86400
  ADS-PRO:
    type: http
    behavior: domain
    url: "https://adrules.top/adrules_domainset.txt"
    path: ruleset/adrules_domainset.txt
    format: text
    interval: 86400
rules:
#  - AND,((NETWORK,TCP)),ğŸ¥‡FIRSTğŸ¥‡
#  - AND,((NETWORK,UDP)),ğŸ¥‡FIRSTğŸ¥‡
  - AND,((DST-PORT,443),(NETWORK,UDP)),REJECT
  - OR,((RULE-SET,ADS),(RULE-SET,ADS-PRO)),REJECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - DOMAIN,yacd.metacubex.one,DIRECT
  - DOMAIN,metacubexd.pages.dev,DIRECT
  - RULE-SET,gf,ğŸ¥‡FIRSTğŸ¥‡
  - RULE-SET,blocked,ğŸ¥‡FIRSTğŸ¥‡
  - DST-PORT,53,ğŸ¥‡DNSğŸ¥‡
  - DOMAIN-SUFFIX,acl4.ssr,ğŸ¥‡IRANğŸ¥‡
  - DOMAIN-SUFFIX,ip6-localhost,ğŸ¥‡IRANğŸ¥‡
  - DOMAIN-SUFFIX,ip6-loopback,ğŸ¥‡IRANğŸ¥‡
  - DOMAIN-SUFFIX,lan,ğŸ¥‡IRANğŸ¥‡
  - DOMAIN-SUFFIX,local,ğŸ¥‡IRANğŸ¥‡
  - DOMAIN-SUFFIX,localhost,ğŸ¥‡IRANğŸ¥‡
  - IP-CIDR,0.0.0.0/8,REJECT,no-resolve
  - IP-CIDR,10.0.0.0/8,REJECT,no-resolve
  - IP-CIDR,100.64.0.0/10,REJECT,no-resolve
  - IP-CIDR,127.0.0.0/8,REJECT,no-resolve
  - IP-CIDR,172.16.0.0/12,REJECT,no-resolve
  - IP-CIDR,192.168.0.0/16,REJECT,no-resolve
  - IP-CIDR,198.18.0.0/16,REJECT,no-resolve
  - IP-CIDR,224.0.0.0/4,REJECT,no-resolve
  - IP-CIDR6,::1/128,REJECT,no-resolve
  - IP-CIDR6,fc00::/7,REJECT,no-resolve
  - IP-CIDR6,fe80::/10,REJECT,no-resolve
  - IP-CIDR6,fd00::/8,REJECT,no-resolve
  - IP-CIDR,1.1.1.1/32,REJECT
  - IP-CIDR,8.8.8.8/32,REJECT
  - DOMAIN,dns.alidns.com,REJECT
  - IP-CIDR,114.114.114.114/32,REJECT
  - IP-CIDR,180.76.76.76/32,REJECT
  - IP-CIDR,223.5.5.5/32,REJECT
  - IP-CIDR,94.140.14.140/32,REJECT
  - IP-CIDR,94.140.14.141/32,REJECT
  - IP-CIDR,223.6.6.6/32,REJECT
  - AND,((PROCESS-NAME,clash),(NOT,((IN-TYPE,inner)))),REJECT
  - IN-TYPE,inner,ğŸ¥‡FIRSTğŸ¥‡
  - GEOIP,cn,ğŸ¥‡IRANğŸ¥‡
  - GEOIP,IR,ğŸ¥‡IRANğŸ¥‡
  - IP-ASN,1,ğŸ¥‡FIRSTğŸ¥‡
  - MATCH,ğŸ¥‡FIRSTğŸ¥‡
