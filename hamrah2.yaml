
# port: 7890        
# socks-port: 7891
# redir-port: 9797
allow-lan: true
mode: rule
bind-address: "*"
ipv6: false
log-level: info
find-process-mode: always
# interface-name: en0
enable-process: true
unified-delay: true
external-controller: 0.0.0.0:9090
external-ui: /data/adb/box/clash/dashboard
geodata-mode: false
# geodata-loader: memconservative
geox-url:
  geoip: "https://github.com/chocolate4u/Iran-v2ray-rules/releases/latest/download/geoip.dat"
  geosite: "https://github.com/chocolate4u/Iran-v2ray-rules/releases/latest/download/geosite.dat"
  mmdb: "https://github.com/chocolate4u/Iran-clash-rules/releases/latest/download/geoip.metadb"
experimental:
  ignore-resolve-fail: true
  sniff-tls-sni: true
  tracing: true
profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: false
  sniff:
    http: { ports: [1-442, 444-8442, 8444-65535], override-destination: true }
    tls: { ports: [1-79, 81-8079, 8081-65535], override-destination: true }
  force-domain:
      - "+.v2ex.com"
      - www.google.com
      - google.com
  skip-domain:
      - Mijia Cloud
      - dlg.io.mi.com
  sniffing:
    - tls
    - http
  port-whitelist:
    - "80"
    - "443"
force-cert-verify: true
tun:
  enable: true
  prefer-h3: true
  listen: 0.0.0.0:53
  stack: gvisor
  dns-hijack:
     - "any:53"
     - "tcp://any:53"
  auto-redir: true
  auto-route: true
  auto-detect-interface: true
hosts:
  'localhost': '127.0.0.1'  
dns:
  enable: true
  use-hosts: true
  ipv6: false
  remote-dns-resolve: false # default value is true
  enhanced-mode: fake-ip # redir-host # fake-ip
  fake-ip-range: 22.0.0.0/8
  listen: 0.0.0.0:1053
  default-nameserver:
    - 114.114.114.114
    - 119.29.29.29
    - 119.28.28.28
    - 8.8.8.8
    - udp://8.8.8.8
    - tcp://8.8.8.8
    - tls://1.12.12.12:853
    - tls://223.5.5.5:853
    - 221.131.165.165
    - 36.156.184.156
  proxy-server-nameserver:
    - https://1.12.12.12/dns-query
    - https://223.5.5.5/dns-query
  nameserver:
    - https://120.53.53.53/dns-query
    - https://dns-adguard.heinu.ga/dns-query
    - https://dns-google.heinu.ga/dns-query
    - tls://223.6.6.6:853
    - 8.8.8.8
    - tls://223.5.5.5:853
    - tls://223.6.6.6:853
    - tls://120.53.53.53
    - tls://1.12.12.12
    - 114.114.114.114#ğŸš€
    - tls://223.5.5.5:853
    - dhcp://en0
    - quic://dns.adguard.com:784#ğŸš€
    - tls://dot.pub:853
    - tls://pdns.itxe.net:853
    - quic://pdns.itxe.net:853
    - https://pdns.itxe.net/dns-query
  remote-nameserver:
    - https://8.8.8.8/dns-query
    - tls://8.8.8.8:853
  fallback:
    - tcp://8.8.8.8:53#ğŸš€ 
  nameserver-policy:
    '+.example.com': 192.168.1.1  
    "geosite:.ir,private": 
      - https://223.5.5.5/dns-query
      - https://120.53.53.53/dns-query
    "geosite:ir":
      - https://8.8.4.4/dns-query
      - https://1.0.0.1/dns-query
 # proxy-server-nameserver:
#    - https://223.5.5.5/dns-queryğŸ¦ğŸ¦
 #   - https://120.53.53.53/dns-query   
proxies:
  - {"name":"defaultName_1","type":"wireguard","server":"188.114.99.99","port":3476,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_2","type":"wireguard","server":"188.114.99.234","port":945,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_3","type":"wireguard","server":"188.114.96.79","port":3138,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_4","type":"wireguard","server":"162.159.192.32","port":8854,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_5","type":"wireguard","server":"188.114.98.81","port":894,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_6","type":"wireguard","server":"188.114.96.1","port":968,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_7","type":"wireguard","server":"188.114.96.86","port":8854,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_8","type":"wireguard","server":"188.114.96.190","port":968,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_9","type":"wireguard","server":"188.114.99.237","port":934,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
  - {"name":"defaultName_10","type":"wireguard","server":"188.114.99.176","port":7559,"udp":true,"ip":"172.16.0.2","private-key":"IOEw9PNsX/Uzyg+XhYaOpWOAX+vtfBQUmk7UH+nXa3E=","public-key":"bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=","dns":["9.9.9.9","149.112.112.112","26.20:fe::fe","26.20:fe::9"],"remote-dns-resolve":false}
proxy-groups:
  - name: ğŸ¦ğŸ¦
    type: select
    proxies:
      - ğŸš€
      - ğŸ”¯
      - â™»ï¸
      - ğŸš€ğŸš€
    use:
      - provide1
#      - provide2
  #    - provide3
 #     - provide4
 #     - provide5
  - name: ğŸš€
    type: select
    url: http://www.gstatic.com/generate_204
 #   interval: 
   # tolerance: 77   # select
    proxies:
      - â™»ï¸
      - ğŸ”¯
      - ğŸš€ğŸš€
     
    use:
      - provide1
 #     - provide2
 #     - provide3
 #     - provide4
#      - provide5
  - name: â™»ï¸
    type: url-test
    url: https://www.google.com/generate_204
    interval: 300
#    tolerance: 100
    proxies:
    
    use:
      - provide1
#      - provide2
 #     - provide3
 #     - provide4
#      - provide5
  - name: ğŸ”¯
    type: fallback
    url: https://www.google.com/generate_204
    interval: 180
    proxies:
   
    use:
      - provide1
#     - provide2
     # - provide3
 #     - provide4
  #    - provide5
  - name: ğŸ¯
    type: select
    proxies:
      - DIRECT
      - ğŸš€
      - â™»ï¸
      - ğŸ”¯
      - ğŸ›‘
  - name: ğŸš€ğŸš€
    type: url-test
    url: https://www.google.com/generate_204
    interval: 200
    tolerance: 60
    proxies:
      - defaultName_1
      - defaultName_2
      - defaultName_3
      - defaultName_4
      - defaultName_5
      - defaultName_6
      - defaultName_7
      - defaultName_8
      - defaultName_9
      - defaultName_10  
    use:
      - provide1
  #    - provide2
 #     - provide4
  - name: ğŸ›‘
    type: select
    proxies:
      - PASS
      - DIRECT
  - name: ğŸ¦
    type: select
    proxies:
      - ğŸ¦ğŸ¦
      - ğŸš€
      - ğŸš€ğŸš€
      - â™»ï¸
      - ğŸ”¯   
    use:
      - provide1
 #     - provide2
 #     - provide4
  #    - provide4
  #    - provide5
proxy-providers:
  provide1:
    type: http
    url: "https://raw.githubusercontent.com/abbasdvd3/clash/main/2.yaml"
    interval: 3600
    path: proxy_hamrah2/40vlls.yaml
    health-check:
      enable: true
      url: http://www.google.com/generate_204
      interval: 300
  provide2:
    type: http
    url: ""
    interval: 3600
    path: proxy_hamrah2/provide2.yaml
    health-check:
      enable: true
      url: http://www.google.com/generate_204
      interval: 300
      
  provide3:
    type: http
    url: ""
    interval: 3600
    path: proxy_hamrah2/provide3.yaml
    health-check:
      enable: true
      url: http://www.google.com/generate_204
      interval: 300

  provide4:
    type: http
    url: ""
    interval: 3600
    path: proxy_hamrah2/full.yaml
    health-check:
      enable: true
      url: http://www.google.com/generate_204
      interval: 300
      
  provide5:
    type: http
    url: ""
    interval: 3600
    path: proxy_hamrah2/provide5.yaml
    health-check:
      enable: true
      url: http://www.google.com/generate_204
      interval: 300
rule-providers:
  adguard:
    type: http
    format: yaml
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdGuardSDNSFilter/AdGuardSDNSFilter_Domain_For_Clash.txt"
    path: ./ruleset/ir.txt
    interval: 86400
    
  gfw:
    type: http
    format: yaml
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt"
    path: ./ruleset/gfw.txt
    interval: 86400
  UnBan:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/UnBan.list
  BanAD:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanAD.list
  BanProgramAD:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanProgramAD.list
  BanEasyList:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyList.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanEasyList.list
  BanEasyListChina:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyListChina.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanEasyListChina.list
  BanEasyPrivacy:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyPrivacy.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/BanEasyPrivacy.list
  YouTube:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/YouTube.list
  ProxyMedia:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ProxyMedia.list
  ProxyGFWlist:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/ProxyGFWlist.list
  LocalAreaNetwork:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/LocalAreaNetwork.list   

  GoogleFCM:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/GoogleFCM.list
    
  GoogleCN:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list
    format: text
    interval: 3600
    path: ./ACL4SSR/ACL4SSR/GoogleCN.list
    
rules :
  - RULE-SET,GoogleFCM,ğŸš€
  - RULE-SET,GoogleCN,ğŸš€
  - RULE-SET,LocalAreaNetwork,DIRECT
  - RULE-SET,ProxyGFWlist,ğŸš€
  - RULE-SET,UnBan,ğŸš€
  - RULE-SET,BanAD,ğŸ›‘
  - RULE-SET,BanProgramAD,ğŸš€
  - RULE-SET,BanEasyList,ğŸ›‘
  - RULE-SET,BanEasyListChina,ğŸ›‘
  - RULE-SET,BanEasyPrivacy,ğŸ›‘
  - RULE-SET,YouTube,ğŸš€
#  - RULE-SET,ChinaMedia,ğŸ¦ğŸ¦
  - RULE-SET,ProxyMedia,ğŸš€
  - RULE-SET,adguard,ğŸ›‘
  - geoip,ir,DIRECT
  - geoip,private,DIRECT,no-resolve
#  - geoip,arvancloud,ğŸ¯
#  - geoip,derakcloud,ğŸ¯
#  - geoip,iranserver,ğŸ¯
  - geoip,google,ğŸš€
#  - geoip,microsoft,ğŸ¦ğŸ¦
#  - geoip,bing,ğŸ¦ğŸ¦
#  - geoip,github,ğŸ¦ğŸ¦,no-resolve
#  - geoip,facebook,ğŸ¦ğŸ¦
#  - geoip,twitter,ğŸ¦ğŸ¦
  - geoip,telegram,ğŸš€
#  - geoip,openai,ğŸ¦ğŸ¦
#  - geoip,phishing,ğŸ›‘
#  - geoip,malware,ğŸ›‘
#  - geosite,social,ğŸ¦ğŸ¦
#  - geosite,cryptominers,ğŸ›‘
#  - geosite,phishing,ğŸ›‘
#  - geosite,malware,ğŸ›‘
  - geosite,category-ads-all,ğŸ›‘
#  - geosite,ir,ğŸ¯
#  - geosite,ads,ğŸ¯
  - MATCH,ğŸ¦
